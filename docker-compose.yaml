version: "3.7"
services:
  db:
    build:
      context: ./db
    environment:
      - POSTGRES_PASSWORD=TODO
  mqtt_broker:
    build:
      context: ./mqtt-broker
    ports:
      - "1883:1883"
  hub:
    build:
      context: ./hub
    ports:
      - "5151:5151"
    depends_on:
      - db
      - mqtt_broker
  webapp:
    build:
      context: ./webapp
    ports:
      - "3000:3000"
    depends_on:
      - hub
